<% layout( '../admin-layout' ) -%>


<div class="col-md-10">
<h2>Edit Video File</h2>
<br>

<script>
/*
todo:
- 
*/
$(document).ready(function() {

	$('#createStills').click(function(){
		var id='<%= items._id %>';
		$.get('/admin/videos/files/create-stills/'+id, function(d){
			for(var i = 1; i < 9; i++){
				var o = new Image(); 
				// animate transition	if image is loaded				
				$(o) // vi2.observer.current_stream
					.attr('src', '/static/img/stills/still_'+id+'_'+i+'.png')
					.addClass('slide ov-'+id)
					.css({width:'50%'})
					//.css({ height:'100vh' })
					.unbind('load')
					.bind('load', function(e){ //alert(JSON.stringify(t))
						//$('.stills').append(o);
					})
					.appendTo('.stills');
				//$('.stisls').find('img#id'+i).attr('src', '/static/img/stills/still_'+id+'_'+i+'.png');
			}
		})
	})
	   
});
</script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>



<div class="row">
	<div class="col-md-8 edit-form">
    <form 
    	id="metadataForm" 
    	action="/admin/videos/files/update/<%= items._id %>" 
    	method="POST" 
    	accept-charset="utf-8"
    	>
		<div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Title</span>
			<input type="text" class="form-control" placeholder="title" aria-describedby="sizing-addon1" name="title" value="<%= items.title %>">
    </div>
    <br>
    <div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Video URL</span>
			<input id="url" type="text" class="form-control" placeholder="video" aria-describedby="sizing-addon1" name="video" value="<%= items.video %>">
    </div>
    <br>
    <div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Creator</span>
			<input type="text" class="form-control" placeholder="creator" aria-describedby="sizing-addon1" name="creator" value="<%= items.creator %>">
    </div>
    <br>
    <div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Institution</span>
			<input type="text" class="form-control" placeholder="institution" aria-describedby="sizing-addon1" name="institution" value="<%= items.institution %>">
    </div>
    <br>
    <div class="form">
			<span class="" id="sizing-addon1"><strong>Description</strong></span>
			<textarea class="form-control" rows="4" id="" name="description"><%= items.description %></textarea>
    </div>
    <br>
    <div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Category</span>
			<input type="text" class="form-control" placeholder="category" aria-describedby="sizing-addon1" name="category" value="<%= items.category %>">
    </div>
    <br>
    <div class="input-group input-group-xs">
			<span class="input-group-addon" id="sizing-addon1">Tags</span>
			<input type="text" class="form-control" placeholder="tags1, tags2, ..." aria-describedby="sizing-addon1" name="tags" value="<%= items.tags %>">
    </div>
    <br>
     <div class="form">
			<span class="" id="sizing-addon1"><strong>License</strong></span>
			<select name="license">
				<option value="cc-by">Creative Commons - attribution (cc-by)</option>
				<option value="pd">Public Domain (pd)</option>
				<option value="cr">Copy Right Restricted</option>
				<option value="nn">Unknown</option>
			</select>
    </div>
    <br>
    <!-- Additional Meta Data -->
     
    <a class="" role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
		<h4><span class="glyphicon glyphicon-collapse-down"></span> Additional Fields</h4>
		</a>
		<div class="collapse" id="collapseExample">
			<br>
			<div class="input-group input-group-xs">
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Publisher</span>
					<input type="text" class="form-control" placeholder="publisher" aria-describedby="sizing-addon1" name="publisher" value="<%= items.publisher %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Contributor</span>
					<input type="text" class="form-control" placeholder="contributor" aria-describedby="sizing-addon1" name="contributor" value="<%= items.contributor %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Subject</span>
					<input type="text" class="form-control" placeholder="subject" aria-describedby="sizing-addon1" name="subject" value="<%= items.subject %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Coverage</span>
					<input type="text" class="form-control" placeholder="coverage" aria-describedby="sizing-addon1" name="coverage" value="<%= items.coverage %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Source</span>
					<input type="text" class="form-control" placeholder="source" aria-describedby="sizing-addon1" name="source" value="<%= items.source %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Rights</span>
					<input type="text" class="form-control" placeholder="rights" aria-describedby="sizing-addon1" name="rights" value="<%= items.rights %>">
				</div>
				<br>		
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Date</span>
					<input type="text" class="form-control" placeholder="date" aria-describedby="sizing-addon1" name="date" value="<%= items.date %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Language</span>
					<input type="text" class="form-control" placeholder="language" aria-describedby="sizing-addon1" name="language" value="<%= items.language %>">
				</div>
				<br>
				<div class="input-group input-group-xs">
					<span class="input-group-addon" id="sizing-addon1">Relation</span>
					<input type="text" class="form-control" placeholder="relation" aria-describedby="sizing-addon1" name="relation" value="<%= items.relation %>">
				</div> 
				<br>
				<% id = Math.random()*9999 %>
				<input type="input" name="mimetype" value="<%= items.mimetype %>" />
				<input type="input" name="format" value="<%= items.format %>" />
				<input type="input" name="length" value="0" />
				<input type="input" name="type" value="video" />
				<input type="input" name="size" value="<%= items.size %>" />
			</div>
		</div>
    
   
    <br><br>
    <div class="buttons">
      <button id="save-btn" class="btn btn-primary" type="submit">save</button>  
      <a href="/admin/videos/files">cancel</a>
      <a class="alert-btn right" href="/admin/videos/files/destroy/<%= items._id %>" title="Delete this video file">delete</a>
    </div>
  </form>
</div>
<div class="col-md-4">
	<button class="btn btn-secondary" id="createStills">Generate Still Images</button><br>
	<div class="stills"></div>
</div>
</div>
<!--<img id="id1" />
		<img id="id2" />
		<img id="id3" />
		<img id="id4" />
		<img id="id5" />
		<img id="id6" />
		<img id="id7" />
		<img id="id8" />-->



 

